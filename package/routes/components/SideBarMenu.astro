---
import type { RouteMap } from 'astro-feedback:routes';
import { getLangFromUrl, useTranslations } from '../i18n';
import GetIcon from './icons/GetIcon.astro';

interface Props {
	r: RouteMap;
	sideBarActiveItemID?: string | undefined;
}
const {
	sideBarActiveItemID,
	r: {
		base: { index: homePage },
		portal: { index: dashboardIndex },
	},
} = Astro.props;

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang, 'components/side-bar');
---

<ul class="menu grow shrink menu-md overflow-y-auto">

	<div class="divider mt-0 mb-2" id="ui-components-side-bar-main">{t('main')}</div>
	<li>
		<a class="btn shadow-md" id="home" href={homePage}>
			<GetIcon icon={'back'} class='h-[1.2rem] w-[1.2rem]'/>
			<span id="ui-components-side-bar-homepage">{t('homepage')}</span>
		</a>
	</li>
	
	<div class="divider my-2" id="ui-components-side-bar-portal">{t('portal')}</div>
	
	<li>
		<a class="btn shadow-md" id='dashboard' href={dashboardIndex}>
			<GetIcon icon={'dashboard'} class='h-[1.2rem] w-[1.2rem]'/>
			<span id="ui-components-side-bar-dashboard">{t('dashboard')}</span>
		</a>
	</li>

</ul>

<script 
	is:inline 
	data-sidebar-active-item-id={sideBarActiveItemID}>

const sideBarActiveItemID = document.currentScript.getAttribute('data-sidebar-active-item-id');
const activeClass = document.currentScript.getAttribute('data-active-class');

const activeItemElem = document.getElementById(sideBarActiveItemID);

activeItemElem && activeItemElem.classList.add('bg-neutral', 'text-neutral-content');

</script>