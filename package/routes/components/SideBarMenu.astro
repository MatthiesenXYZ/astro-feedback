---
import type { RouteMap } from 'astro-feedback:routes';
import GetIcon, { type currentIcons } from './icons/GetIcon.astro';

interface Props {
	r: RouteMap;
	sideBarActiveItemID?: string | undefined;
}
const {
	sideBarActiveItemID,
	r: {
		base: { index: homePage },
		portal: { index: dashboardIndex },
	},
} = Astro.props;
---

<ul class="menu grow shrink menu-md overflow-y-auto">

	<div class="divider mt-0 mb-2" id="ui-components-side-bar-main">Main Site</div>
	<li>
		<a class="btn shadow-md" id="home" href={homePage}>
			<GetIcon icon={'back'} class='h-[1.2rem] w-[1.2rem]'/>
			<span id="ui-components-side-bar-homepage">Home Page</span>
		</a>
	</li>
	
	<div class="divider my-2" id="ui-components-side-bar-portal">Portal</div>
	
	<li>
		<a class="btn shadow-md" id='dashboard' href={dashboardIndex}>
			<GetIcon icon={'dashboard'} class='h-[1.2rem] w-[1.2rem]'/>
			<span id="ui-components-side-bar-dashboard">Dashboard</span>
		</a>
	</li>

</ul>

<script>
import { $i18n, updateUiString } from "../store/i18n.ts";
import enJson from '../store/translations/en.json';
    
    const i18n = $i18n('components/side-bar', enJson['components/side-bar']);
    
    i18n.subscribe(t => {
        updateUiString({
            element: "ui-components-side-bar-main",
            translation: t['main']
        })
        updateUiString({
            element: "ui-components-side-bar-homepage",
            translation: t['homepage']
        })
		updateUiString({
			element: "ui-components-side-bar-portal",
			translation: t['portal']
		})
		updateUiString({
			element: "ui-components-side-bar-dashboard",
			translation: t['dashboard']
		})
    });
</script>

<script 
	is:inline 
	data-sidebar-active-item-id={sideBarActiveItemID}>

const sideBarActiveItemID = document.currentScript.getAttribute('data-sidebar-active-item-id');
const activeClass = document.currentScript.getAttribute('data-active-class');

const activeItemElem = document.getElementById(sideBarActiveItemID);

activeItemElem && activeItemElem.classList.add('bg-neutral', 'text-neutral-content');

</script>