---
import type { AstroFeedbackOptions } from 'astro-feedback:config';
import { createHead, headDefaults } from '../lib/header.ts';

export interface Props {
	title: string;
	description: string;
	config: AstroFeedbackOptions;
	image?: string | undefined;
}

const {
	title,
	description,
	image,
	config: { headers: userHeaders },
} = Astro.props;

const canonicalURL = Astro.site ? new URL(Astro.url.pathname, Astro.site) : undefined;

const defaultHeaders = headDefaults(title, description, Astro, image, canonicalURL);

const head = createHead(defaultHeaders, userHeaders);
---
{
	head.map(({ 
		tag: Tag, 
		attrs, 
		content }) => ( 
			<Tag {...attrs} set:html={content} />
		))
}